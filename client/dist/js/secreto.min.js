!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.secreto=e()}}(function(){return function e(t,o,n){function i(s,a){if(!o[s]){if(!t[s]){var r="function"==typeof require&&require;if(!a&&r)return r(s,!0);if(c)return c(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=o[s]={exports:{}};t[s][0].call(u.exports,function(e){var o=t[s][1][e];return i(o?o:e)},u,u.exports,e,t,o,n)}return o[s].exports}for(var c="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,o){window.socket=io.connect("https://secreto-wagnercsfilho.c9users.io/"),window.navigation;var n=e("./controllers/login"),i=e("./controllers/home");openFB.init({appId:"1707024216207772"}),$(function(){window.localStorage.getItem("token")?openFB.api({path:"/me",success:function(e){window.currentUser=e,window.currentUser.avatarUrl="http://graph.facebook.com/"+e.id+"/picture?type=small",window.currentUser.facebook_id=e.id,navigation=new phonepack.Navigation(document.querySelector(".navigation"),{page:"views/home.html"},i)},error:function(e){navigation=new phonepack.Navigation(document.querySelector(".navigation"),{page:"views/login.html"},n)}}):navigation=new phonepack.Navigation(document.querySelector(".navigation"),{page:"views/login.html"},n)})},{"./controllers/home":4,"./controllers/login":5}],2:[function(e,t,o){function n(e){var t=navigation.params;e=$(e);var o=e.find(".content"),n=e.find("#comments"),a=e.find("#createComment"),r=e.find("input");i(o,t,!1),s.getPostComments(t,function(e){e&&e.forEach(function(e){c(n,e)})}),s.on("newComment_"+t._id,function(e){o.animate({scrollTop:o[0].scrollHeight},800),c(n,e)}),a.on("click",function(e){s.createComment({_post:t._id,text:r.val(),user:window.currentUser},function(e){var t=new phonepack.Notification;t.success("Successfully"),r.val("")})})}var i=e("../templates/postDetails"),c=e("../templates/comment"),s=e("../services/comment");t.exports=n},{"../services/comment":6,"../templates/comment":8,"../templates/postDetails":10}],3:[function(e,t,o){function n(e){function t(e,t,o){var n=new XMLHttpRequest,i="GET",c="https://maps.googleapis.com/maps/api/geocode/json?latlng="+e+","+t+"&sensor=true",s=!0;n.open(i,c,s),n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=JSON.parse(n.responseText);if(e.results[0]){var t=e.results[e.results.length-3].formatted_address;console.log(t);var i=t.split(","),c=i.length,s=i[c-1],a=i[c-2];o({city:a,country:s})}else alert("address not found")}},n.send()}navigator.geolocation.getCurrentPosition(function(o){var n=o.coords.latitude,i=o.coords.longitude;t(n,i,e)},function(e){var t="Unknown error";switch(e.code){case 1:t="Permission denied";break;case 2:t="Position unavailable";break;case 3:t="Timeout"}alert(t)},{enableHighAccuracy:!0,timeout:1e3,maximumAge:0})}function i(e){var t={text:null,quotebg:"white",user:window.currentUser},o=$(e).find("textarea"),i=$(e).find(".postTexture"),c=$(e).find("blockquote"),s=["white","blue","red","gray","green","black","pink","purple","orange","teal"],a=0;o.elastic(),o.focus(),i.on("click",function(e){$(this);a===s.length-1&&(a=-1),a++,c.removeClass(),c.addClass("quote-card "+s[a]),t.quotebg=s[a]}),$(e).on("click",".new-compose",function(){n(function(e){t.text=o.val(),t.location=e,socket.emit("createPost",t,function(){var e=new phonepack.Notification;e.success("Successfully"),navigation.closeCurrentPage()})})})}t.exports=i},{}],4:[function(e,t,o){function n(e){var t,o=function(e){a.getAllPost(e,function(e){e.forEach(function(e){c(l,e,s,!0)}),u.hide()})},n=function(e){a.getFriendPosts(e,function(e){e.forEach(function(e){c(r,e,s,!1)}),u.hide()})};e=$(e);var r=e.find("#tabFriends"),l=e.find("#tabWorld"),u=(new phonepack.TabBar(e.find("#tab")[0]),new phonepack.PullToRefresh(r[0],{},function(){n(t)}),new phonepack.Loading);e.on("click",".compose",function(e){navigation.pushPage("views/compose.html",{},i)}),a.on("newPost",function(e){c(r,e,s)}),u.show(),openFB.api({path:"/me/friends",success:function(e){t=e.data.map(function(e){return e.id}).concat(window.currentUser.facebook_id),n(t),o(t)}})}var i=e("./compose"),c=e("../templates/post"),s=e("./comments"),a=e("../services/post");t.exports=n},{"../services/post":7,"../templates/post":9,"./comments":2,"./compose":3}],5:[function(e,t,o){function n(e){openFB.init({appId:"1707024216207772"}),$(e).find(".loginfb").on("click",function(){openFB.login(function(e){window.localStorage.setItem("token",e.authResponse.accessToken),openFB.api({path:"/me",success:function(e){window.currentUser=e,window.currentUser.avatarUrl="http://graph.facebook.com/"+e.id+"/picture?type=small",window.currentUser.facebook_id=e.id,window.navigation.changePage("/views/home.html",{},i)}})},{scope:"email,public_profile,user_friends"})})}var i=e("./home");t.exports=n},{"./home":4}],6:[function(e,t,o){t.exports={getPostComments:function(e,t){socket.emit("getPostComments",e,function(e,o){t(o)})},createComment:function(e,t){socket.emit("createComment",e,function(e,o){t(o)})},on:function(e,t){socket.on(e,t)}}},{}],7:[function(e,t,o){t.exports={getAllPost:function(e,t){socket.emit("getAllPost",e,function(e,o){t(o)})},getFriendPosts:function(e,t){socket.emit("getFriendPosts",e,function(e,o){t(o)})},likePost:function(e,t){socket.emit("likePost",e,function(e,o){t(o)})},on:function(e,t){socket.on(e,t)}}},{}],8:[function(e,t,o){function n(e,t){return Math.floor(Math.random()*(t-e+1))+e}function i(e,t){var o={icon:c[n(0,c.length-1)],color:s[n(0,s.length-1)]};e.append('<li class="list__item"><div class="list__primary"><i class="icon icon--circled '+o.color+" text-white mdi mdi-"+o.icon+'"></i></div><div class="list__content">'+t.text+'</div><div class="list__secondary"><button class="button button--icon ripple"><i class="icon mdi mdi-heart-outline"></button></div></li>')}var c=["emoticon","emoticon-cool","emoticon-devil","emoticon-happy","emoticon-neutral","emoticon-poop","emoticon-tongue","fire","fish","flower","food-apple","football","motorbike","snowman","umbrella"],s=["bg-red","bg-pink","bg-purple","bg-deep-purple","bg-indigo","bg-blue","bg-light-blue","bg-cyan","bg-teal","bg-green","bg-light-green","bg-lime","bg-yellow"];t.exports=i},{}],9:[function(e,t,o){function n(e,t,o,n){function c(){return t.likes.indexOf(currentUser.facebook_id)>-1?"text-red":void 0}var s='<blockquote class="quote-card '+t.quotebg+'"><div class="quote_top"><button class="button ripple button--icon shared" style="float: right"><i class="icon mdi mdi-share-variant"></i> </button></div><p> '+t.text+' </p><div class="quote_bottom"><div class="row"><div class="cell"><button class="button ripple button--icon like '+c()+'"><i class="icon mdi mdi-heart-outline"></i> </button> <span>'+t.likes.length+'</span>  <button class="button ripple button--icon comment"><i class="icon mdi mdi-comment-outline"></i> </button> <span>'+t.comments+'</span> </div><div class="cell"><cite>'+(n===!0&&t.location?t.location.city:"Amigo")+"</cite></div></div></div></blockquote>",a=$(s),r=a.find(".comment"),l=a.find(".like"),u=a.find(".shared"),d=l.next(),f=r.next();r.on("click",function(e){navigation.pushPage("/views/comments.html",t,o)}),l.on("click",function(e){-1===t.likes.indexOf(currentUser.facebook_id)&&i.likePost({post:t,facebook_id:currentUser.facebook_id},function(e){t=e})}),u.on("click",function(e){html2canvas($(this).closest("blockquote"),{onrendered:function(e){$("body").html(e)}})}),i.on("newLike_"+t._id,function(e){t=e,e.likes.indexOf(currentUser.facebook_id)>-1&&l.addClass("text-red"),d.html(e.likes.length)}),i.on("newComment_"+t._id,function(e){t=e,f.html(e.comments)}),e.prepend(a)}var i=e("../services/post");t.exports=n},{"../services/post":7}],10:[function(e,t,o){function n(e,t,o){var n='<blockquote class="quote-card '+t.quotebg+'"><div class="quote_top"><button class="button button--icon ripple" onclick="navigation.closeCurrentPage()">  <i class="icon mdi mdi-arrow-left"></i></button><button class="button ripple button--icon" style="float: right"><i class="icon mdi mdi-share-variant"></i> </button></div><p> '+t.text+' </p><div class="quote_bottom"><div class="row"><div class="cell"><button class="button ripple button--icon like"><i class="icon mdi mdi-heart-outline"></i> </button> <span>'+t.likes.length+'</span>  <button class="button ripple button--icon comment"><i class="icon mdi mdi-comment-outline"></i> </button> <span>'+t.comments+'</span> </div><div class="cell"><cite>'+(o===!0&&t.location?t.location.city:"Amigo")+"</cite></div></div></div></blockquote>",c=$(n),s=c.find(".comment"),a=c.find(".like"),r=(c.find(".shared"),a.next()),l=s.next();a.on("click",function(e){i.likePost(t,function(e){t=e})}),i.on("newComment_"+t._id,function(e){t=e,l.html(e.comments)}),i.on("newLike_"+t._id,function(e){t=e,r.html(e.likes.length),t.likes.indexOf(currentUser.facebook_id)>-1&&a.addClass("text-red")}),e.prepend(c)}var i=e("../services/post");t.exports=n},{"../services/post":7}]},{},[1])(1)});